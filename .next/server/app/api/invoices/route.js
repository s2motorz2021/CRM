/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/invoices/route";
exports.ids = ["app/api/invoices/route"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Finvoices%2Froute&page=%2Fapi%2Finvoices%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finvoices%2Froute.js&appDir=C%3A%5CUsers%5Cuser%5CDesktop%5CS2_Motorz_CRM%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cuser%5CDesktop%5CS2_Motorz_CRM&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Finvoices%2Froute&page=%2Fapi%2Finvoices%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finvoices%2Froute.js&appDir=C%3A%5CUsers%5Cuser%5CDesktop%5CS2_Motorz_CRM%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cuser%5CDesktop%5CS2_Motorz_CRM&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_user_Desktop_S2_Motorz_CRM_src_app_api_invoices_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/invoices/route.js */ \"(rsc)/./src/app/api/invoices/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/invoices/route\",\n        pathname: \"/api/invoices\",\n        filename: \"route\",\n        bundlePath: \"app/api/invoices/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\user\\\\Desktop\\\\S2_Motorz_CRM\\\\src\\\\app\\\\api\\\\invoices\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_user_Desktop_S2_Motorz_CRM_src_app_api_invoices_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZpbnZvaWNlcyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGaW52b2ljZXMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZpbnZvaWNlcyUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUN1c2VyJTVDRGVza3RvcCU1Q1MyX01vdG9yel9DUk0lNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q3VzZXIlNUNEZXNrdG9wJTVDUzJfTW90b3J6X0NSTSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDMEI7QUFDdkc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBc0Q7QUFDOUQ7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDMEY7O0FBRTFGIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXHVzZXJcXFxcRGVza3RvcFxcXFxTMl9Nb3RvcnpfQ1JNXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGludm9pY2VzXFxcXHJvdXRlLmpzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9pbnZvaWNlcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2ludm9pY2VzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9pbnZvaWNlcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXHVzZXJcXFxcRGVza3RvcFxcXFxTMl9Nb3RvcnpfQ1JNXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGludm9pY2VzXFxcXHJvdXRlLmpzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Finvoices%2Froute&page=%2Fapi%2Finvoices%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finvoices%2Froute.js&appDir=C%3A%5CUsers%5Cuser%5CDesktop%5CS2_Motorz_CRM%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cuser%5CDesktop%5CS2_Motorz_CRM&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/invoices/route.js":
/*!***************************************!*\
  !*** ./src/app/api/invoices/route.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PATCH: () => (/* binding */ PATCH),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/mongodb */ \"(rsc)/./src/lib/mongodb.js\");\n/* harmony import */ var _models_Invoice__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/models/Invoice */ \"(rsc)/./src/models/Invoice.js\");\n/* harmony import */ var _models_JobCard__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/models/JobCard */ \"(rsc)/./src/models/JobCard.js\");\n\n\n\n\n// Helper to calculate invoice totals from parts, labour and outside work\nconst calculateInvoiceTotals = (parts, labour, outsideWork, manualDiscount, couponDiscount)=>{\n    const process = (items)=>items?.map((item)=>{\n            const qty = Number(item.qty) || 0;\n            const rate = Number(item.rate) || 0;\n            const gstPercent = Number(item.gst) || 0;\n            const taxableAmount = qty * rate;\n            const gstAmount = taxableAmount * (gstPercent / 100);\n            return {\n                ...item,\n                qty,\n                rate,\n                gst: gstPercent,\n                taxableAmount,\n                lineTotal: taxableAmount + gstAmount\n            };\n        }) || [];\n    const processedParts = process(parts);\n    const processedLabour = process(labour);\n    const processedOutsideWork = process(outsideWork);\n    const allItems = [\n        ...processedParts,\n        ...processedLabour,\n        ...processedOutsideWork\n    ];\n    // Subtotal is sum of all taxable amounts BEFORE GST\n    const subtotal = allItems.reduce((sum, item)=>sum + (item.taxableAmount || 0), 0);\n    // Total GST is sum of GST from all items\n    const totalGst = allItems.reduce((sum, item)=>sum + (item.taxableAmount || 0) * ((item.gst || 0) / 100), 0);\n    const cgst = totalGst / 2;\n    const sgst = totalGst / 2;\n    const discountAmount = (Number(manualDiscount) || 0) + (Number(couponDiscount) || 0);\n    const beforeRound = subtotal + totalGst - discountAmount;\n    const grandTotal = Math.round(beforeRound);\n    const roundOff = grandTotal - beforeRound;\n    return {\n        parts: processedParts,\n        labour: processedLabour,\n        outsideWork: processedOutsideWork,\n        subtotal,\n        cgst,\n        sgst,\n        discount: discountAmount,\n        manualDiscount: Number(manualDiscount) || 0,\n        couponDiscount: Number(couponDiscount) || 0,\n        roundOff,\n        grandTotal\n    };\n};\nasync function GET(request) {\n    try {\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n        const { searchParams } = new URL(request.url);\n        const status = searchParams.get('status');\n        const paymentStatus = searchParams.get('paymentStatus');\n        const branch = searchParams.get('branch');\n        const startDate = searchParams.get('startDate');\n        const endDate = searchParams.get('endDate');\n        const search = searchParams.get('search');\n        let query = {};\n        if (status) query.status = status;\n        if (paymentStatus) query.paymentStatus = paymentStatus;\n        if (branch) query.branch = branch;\n        if (startDate || endDate) {\n            query.date = {};\n            if (startDate) query.date.$gte = new Date(startDate);\n            if (endDate) query.date.$lte = new Date(endDate);\n        }\n        const invoices = await _models_Invoice__WEBPACK_IMPORTED_MODULE_2__[\"default\"].find(query).populate('customerId').populate('vehicleId').populate('jobCardId').sort({\n            createdAt: -1\n        });\n        let filteredInvoices = invoices;\n        if (search) {\n            const searchLower = search.toLowerCase();\n            filteredInvoices = invoices.filter((inv)=>inv.invoiceNo?.toLowerCase().includes(searchLower) || inv.customerId?.name?.toLowerCase().includes(searchLower) || inv.customerId?.phone?.includes(search) || inv.vehicleId?.registrationNo?.toLowerCase().includes(searchLower));\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(filteredInvoices);\n    } catch (error) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n        const data = await request.json();\n        if (data.customerGstin) {\n            const gstinRegex = /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;\n            if (!gstinRegex.test(data.customerGstin)) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: 'Invalid GSTIN format'\n                }, {\n                    status: 400\n                });\n            }\n        }\n        if (!data.invoiceNo) {\n            const date = new Date();\n            const month = date.getMonth();\n            const year = date.getFullYear();\n            const fyStart = month >= 3 ? year : year - 1;\n            const fyEnd = (fyStart + 1) % 100;\n            const fyCode = `${fyStart % 100}${String(fyEnd).padStart(2, '0')}`;\n            const count = await _models_Invoice__WEBPACK_IMPORTED_MODULE_2__[\"default\"].countDocuments({\n                createdAt: {\n                    $gte: new Date(fyStart, 3, 1),\n                    $lt: new Date(fyStart + 1, 3, 1)\n                }\n            });\n            data.invoiceNo = `INV-${fyCode}-${String(count + 1).padStart(4, '0')}`;\n        }\n        // Strictly recalculate all totals from input items\n        const totals = calculateInvoiceTotals(data.parts, data.labour, data.outsideWork, data.manualDiscount, data.couponDiscount);\n        // Merge calculated totals back into data\n        Object.assign(data, totals);\n        // Set initial payment state\n        const amountPaid = Number(data.amountPaid) || 0;\n        if (data.paymentStatus === 'paid') {\n            data.amountPaid = data.grandTotal;\n            data.paidAt = new Date();\n        } else if (data.paymentStatus === 'partial') {\n            data.amountPaid = amountPaid;\n        } else {\n            data.amountPaid = 0;\n            data.paymentStatus = 'pending';\n        }\n        data.balanceAmount = data.grandTotal - data.amountPaid;\n        data.auditLog = [\n            {\n                action: 'created',\n                field: 'invoice',\n                newValue: data.invoiceNo,\n                userName: data.createdByName || 'System',\n                timestamp: new Date()\n            }\n        ];\n        const invoice = await _models_Invoice__WEBPACK_IMPORTED_MODULE_2__[\"default\"].create(data);\n        if (data.jobCardId) {\n            await _models_JobCard__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findByIdAndUpdate(data.jobCardId, {\n                isLocked: true,\n                status: 'delivered',\n                invoiceId: invoice._id\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(invoice);\n    } catch (error) {\n        console.error('Invoice creation error:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\nasync function PATCH(request) {\n    try {\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n        const data = await request.json();\n        const { _id, recordPayment, paymentAmount, paymentMethod, updatedByName, ...otherUpdateData } = data;\n        if (!_id) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Invoice ID required'\n        }, {\n            status: 400\n        });\n        const invoice = await _models_Invoice__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findById(_id);\n        if (!invoice) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Invoice not found'\n        }, {\n            status: 404\n        });\n        if (invoice.isLocked && !recordPayment) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Invoice is locked and cannot be edited'\n            }, {\n                status: 403\n            });\n        }\n        if (!invoice.auditLog) invoice.auditLog = [];\n        // Handle payment recording\n        if (recordPayment) {\n            const payAmt = Number(paymentAmount) || 0;\n            if (payAmt <= 0) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Payment amount must be greater than 0'\n            }, {\n                status: 400\n            });\n            const oldPaid = Number(invoice.amountPaid) || 0;\n            invoice.amountPaid = oldPaid + payAmt;\n            invoice.paymentMethod = paymentMethod || invoice.paymentMethod;\n            invoice.auditLog.push({\n                action: 'payment_recorded',\n                field: 'amountPaid',\n                oldValue: oldPaid,\n                newValue: invoice.amountPaid,\n                userName: updatedByName || 'System',\n                timestamp: new Date()\n            });\n        }\n        // Handle field updates and potential total recalculation\n        const trackFields = [\n            'parts',\n            'labour',\n            'outsideWork',\n            'manualDiscount',\n            'couponDiscount'\n        ];\n        let needsRecalc = false;\n        trackFields.forEach((field)=>{\n            if (otherUpdateData[field] !== undefined && JSON.stringify(invoice[field]) !== JSON.stringify(otherUpdateData[field])) {\n                const oldValue = JSON.parse(JSON.stringify(invoice[field]));\n                invoice[field] = otherUpdateData[field];\n                needsRecalc = true;\n                invoice.auditLog.push({\n                    action: 'updated',\n                    field,\n                    oldValue,\n                    newValue: otherUpdateData[field],\n                    userName: updatedByName || 'System',\n                    timestamp: new Date()\n                });\n            }\n        });\n        if (needsRecalc) {\n            const totals = calculateInvoiceTotals(invoice.parts, invoice.labour, invoice.outsideWork, invoice.manualDiscount, invoice.couponDiscount);\n            Object.assign(invoice, totals);\n        }\n        // Explicitly force balance calculation before save\n        const finalTotal = Number(invoice.grandTotal) || 0;\n        const finalPaid = Number(invoice.amountPaid) || 0;\n        invoice.balanceAmount = finalTotal - finalPaid;\n        // Auto-update status\n        if (invoice.balanceAmount <= 0 && finalTotal > 0) {\n            invoice.paymentStatus = 'paid';\n            if (!invoice.paidAt) invoice.paidAt = new Date();\n            if (!invoice.isLocked) {\n                invoice.isLocked = true;\n                invoice.lockedAt = new Date();\n                invoice.lockedReason = 'Payment completed';\n            }\n        } else if (finalPaid > 0) {\n            invoice.paymentStatus = 'partial';\n        } else {\n            invoice.paymentStatus = 'pending';\n        }\n        await invoice.save();\n        const updatedInvoice = await _models_Invoice__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findById(invoice._id).populate('customerId').populate('vehicleId');\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(updatedInvoice);\n    } catch (error) {\n        console.error('Invoice update error:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FBRyxJQUFJaEY7Z0JBQ3ZCb0QsUUFBUTZCLFlBQVksR0FBRztZQUMzQjtRQUNKLE9BQU8sSUFBSUYsWUFBWSxHQUFHO1lBQ3RCM0IsUUFBUTVELGFBQWEsR0FBRztRQUM1QixPQUFPO1lBQ0g0RCxRQUFRNUQsYUFBYSxHQUFHO1FBQzVCO1FBRUEsTUFBTTRELFFBQVE4QixJQUFJO1FBRWxCLE1BQU1DLGlCQUFpQixNQUFNdkksdURBQU9BLENBQUNzSCxRQUFRLENBQUNkLFFBQVFNLEdBQUcsRUFDcER0RCxRQUFRLENBQUMsY0FDVEEsUUFBUSxDQUFDO1FBRWQsT0FBTzFELHFEQUFZQSxDQUFDeUUsSUFBSSxDQUFDZ0U7SUFDN0IsRUFBRSxPQUFPL0QsT0FBTztRQUNadUMsUUFBUXZDLEtBQUssQ0FBQyx5QkFBeUJBO1FBQ3ZDLE9BQU8xRSxxREFBWUEsQ0FBQ3lFLElBQUksQ0FBQztZQUFFQyxPQUFPQSxNQUFNQyxPQUFPO1FBQUMsR0FBRztZQUFFL0IsUUFBUTtRQUFJO0lBQ3JFO0FBQ0oiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcdXNlclxcRGVza3RvcFxcUzJfTW90b3J6X0NSTVxcc3JjXFxhcHBcXGFwaVxcaW52b2ljZXNcXHJvdXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IGRiQ29ubmVjdCBmcm9tICdAL2xpYi9tb25nb2RiJztcclxuaW1wb3J0IEludm9pY2UgZnJvbSAnQC9tb2RlbHMvSW52b2ljZSc7XHJcbmltcG9ydCBKb2JDYXJkIGZyb20gJ0AvbW9kZWxzL0pvYkNhcmQnO1xyXG5cclxuLy8gSGVscGVyIHRvIGNhbGN1bGF0ZSBpbnZvaWNlIHRvdGFscyBmcm9tIHBhcnRzLCBsYWJvdXIgYW5kIG91dHNpZGUgd29ya1xyXG5jb25zdCBjYWxjdWxhdGVJbnZvaWNlVG90YWxzID0gKHBhcnRzLCBsYWJvdXIsIG91dHNpZGVXb3JrLCBtYW51YWxEaXNjb3VudCwgY291cG9uRGlzY291bnQpID0+IHtcclxuICAgIGNvbnN0IHByb2Nlc3MgPSAoaXRlbXMpID0+IGl0ZW1zPy5tYXAoaXRlbSA9PiB7XHJcbiAgICAgICAgY29uc3QgcXR5ID0gTnVtYmVyKGl0ZW0ucXR5KSB8fCAwO1xyXG4gICAgICAgIGNvbnN0IHJhdGUgPSBOdW1iZXIoaXRlbS5yYXRlKSB8fCAwO1xyXG4gICAgICAgIGNvbnN0IGdzdFBlcmNlbnQgPSBOdW1iZXIoaXRlbS5nc3QpIHx8IDA7XHJcbiAgICAgICAgY29uc3QgdGF4YWJsZUFtb3VudCA9IHF0eSAqIHJhdGU7XHJcbiAgICAgICAgY29uc3QgZ3N0QW1vdW50ID0gdGF4YWJsZUFtb3VudCAqIChnc3RQZXJjZW50IC8gMTAwKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAuLi5pdGVtLFxyXG4gICAgICAgICAgICBxdHksXHJcbiAgICAgICAgICAgIHJhdGUsXHJcbiAgICAgICAgICAgIGdzdDogZ3N0UGVyY2VudCxcclxuICAgICAgICAgICAgdGF4YWJsZUFtb3VudCxcclxuICAgICAgICAgICAgbGluZVRvdGFsOiB0YXhhYmxlQW1vdW50ICsgZ3N0QW1vdW50XHJcbiAgICAgICAgfTtcclxuICAgIH0pIHx8IFtdO1xyXG5cclxuICAgIGNvbnN0IHByb2Nlc3NlZFBhcnRzID0gcHJvY2VzcyhwYXJ0cyk7XHJcbiAgICBjb25zdCBwcm9jZXNzZWRMYWJvdXIgPSBwcm9jZXNzKGxhYm91cik7XHJcbiAgICBjb25zdCBwcm9jZXNzZWRPdXRzaWRlV29yayA9IHByb2Nlc3Mob3V0c2lkZVdvcmspO1xyXG5cclxuICAgIGNvbnN0IGFsbEl0ZW1zID0gWy4uLnByb2Nlc3NlZFBhcnRzLCAuLi5wcm9jZXNzZWRMYWJvdXIsIC4uLnByb2Nlc3NlZE91dHNpZGVXb3JrXTtcclxuXHJcbiAgICAvLyBTdWJ0b3RhbCBpcyBzdW0gb2YgYWxsIHRheGFibGUgYW1vdW50cyBCRUZPUkUgR1NUXHJcbiAgICBjb25zdCBzdWJ0b3RhbCA9IGFsbEl0ZW1zLnJlZHVjZSgoc3VtLCBpdGVtKSA9PiBzdW0gKyAoaXRlbS50YXhhYmxlQW1vdW50IHx8IDApLCAwKTtcclxuXHJcbiAgICAvLyBUb3RhbCBHU1QgaXMgc3VtIG9mIEdTVCBmcm9tIGFsbCBpdGVtc1xyXG4gICAgY29uc3QgdG90YWxHc3QgPSBhbGxJdGVtcy5yZWR1Y2UoKHN1bSwgaXRlbSkgPT4gc3VtICsgKChpdGVtLnRheGFibGVBbW91bnQgfHwgMCkgKiAoKGl0ZW0uZ3N0IHx8IDApIC8gMTAwKSksIDApO1xyXG5cclxuICAgIGNvbnN0IGNnc3QgPSB0b3RhbEdzdCAvIDI7XHJcbiAgICBjb25zdCBzZ3N0ID0gdG90YWxHc3QgLyAyO1xyXG5cclxuICAgIGNvbnN0IGRpc2NvdW50QW1vdW50ID0gKE51bWJlcihtYW51YWxEaXNjb3VudCkgfHwgMCkgKyAoTnVtYmVyKGNvdXBvbkRpc2NvdW50KSB8fCAwKTtcclxuXHJcbiAgICBjb25zdCBiZWZvcmVSb3VuZCA9IHN1YnRvdGFsICsgdG90YWxHc3QgLSBkaXNjb3VudEFtb3VudDtcclxuICAgIGNvbnN0IGdyYW5kVG90YWwgPSBNYXRoLnJvdW5kKGJlZm9yZVJvdW5kKTtcclxuICAgIGNvbnN0IHJvdW5kT2ZmID0gZ3JhbmRUb3RhbCAtIGJlZm9yZVJvdW5kO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcGFydHM6IHByb2Nlc3NlZFBhcnRzLFxyXG4gICAgICAgIGxhYm91cjogcHJvY2Vzc2VkTGFib3VyLFxyXG4gICAgICAgIG91dHNpZGVXb3JrOiBwcm9jZXNzZWRPdXRzaWRlV29yayxcclxuICAgICAgICBzdWJ0b3RhbCxcclxuICAgICAgICBjZ3N0LFxyXG4gICAgICAgIHNnc3QsXHJcbiAgICAgICAgZGlzY291bnQ6IGRpc2NvdW50QW1vdW50LFxyXG4gICAgICAgIG1hbnVhbERpc2NvdW50OiBOdW1iZXIobWFudWFsRGlzY291bnQpIHx8IDAsXHJcbiAgICAgICAgY291cG9uRGlzY291bnQ6IE51bWJlcihjb3Vwb25EaXNjb3VudCkgfHwgMCxcclxuICAgICAgICByb3VuZE9mZixcclxuICAgICAgICBncmFuZFRvdGFsXHJcbiAgICB9O1xyXG59O1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IGRiQ29ubmVjdCgpO1xyXG4gICAgICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcclxuICAgICAgICBjb25zdCBzdGF0dXMgPSBzZWFyY2hQYXJhbXMuZ2V0KCdzdGF0dXMnKTtcclxuICAgICAgICBjb25zdCBwYXltZW50U3RhdHVzID0gc2VhcmNoUGFyYW1zLmdldCgncGF5bWVudFN0YXR1cycpO1xyXG4gICAgICAgIGNvbnN0IGJyYW5jaCA9IHNlYXJjaFBhcmFtcy5nZXQoJ2JyYW5jaCcpO1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IHNlYXJjaFBhcmFtcy5nZXQoJ3N0YXJ0RGF0ZScpO1xyXG4gICAgICAgIGNvbnN0IGVuZERhdGUgPSBzZWFyY2hQYXJhbXMuZ2V0KCdlbmREYXRlJyk7XHJcbiAgICAgICAgY29uc3Qgc2VhcmNoID0gc2VhcmNoUGFyYW1zLmdldCgnc2VhcmNoJyk7XHJcblxyXG4gICAgICAgIGxldCBxdWVyeSA9IHt9O1xyXG4gICAgICAgIGlmIChzdGF0dXMpIHF1ZXJ5LnN0YXR1cyA9IHN0YXR1cztcclxuICAgICAgICBpZiAocGF5bWVudFN0YXR1cykgcXVlcnkucGF5bWVudFN0YXR1cyA9IHBheW1lbnRTdGF0dXM7XHJcbiAgICAgICAgaWYgKGJyYW5jaCkgcXVlcnkuYnJhbmNoID0gYnJhbmNoO1xyXG5cclxuICAgICAgICBpZiAoc3RhcnREYXRlIHx8IGVuZERhdGUpIHtcclxuICAgICAgICAgICAgcXVlcnkuZGF0ZSA9IHt9O1xyXG4gICAgICAgICAgICBpZiAoc3RhcnREYXRlKSBxdWVyeS5kYXRlLiRndGUgPSBuZXcgRGF0ZShzdGFydERhdGUpO1xyXG4gICAgICAgICAgICBpZiAoZW5kRGF0ZSkgcXVlcnkuZGF0ZS4kbHRlID0gbmV3IERhdGUoZW5kRGF0ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBpbnZvaWNlcyA9IGF3YWl0IEludm9pY2UuZmluZChxdWVyeSlcclxuICAgICAgICAgICAgLnBvcHVsYXRlKCdjdXN0b21lcklkJylcclxuICAgICAgICAgICAgLnBvcHVsYXRlKCd2ZWhpY2xlSWQnKVxyXG4gICAgICAgICAgICAucG9wdWxhdGUoJ2pvYkNhcmRJZCcpXHJcbiAgICAgICAgICAgIC5zb3J0KHsgY3JlYXRlZEF0OiAtMSB9KTtcclxuXHJcbiAgICAgICAgbGV0IGZpbHRlcmVkSW52b2ljZXMgPSBpbnZvaWNlcztcclxuICAgICAgICBpZiAoc2VhcmNoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlYXJjaExvd2VyID0gc2VhcmNoLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIGZpbHRlcmVkSW52b2ljZXMgPSBpbnZvaWNlcy5maWx0ZXIoaW52ID0+XHJcbiAgICAgICAgICAgICAgICBpbnYuaW52b2ljZU5vPy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaExvd2VyKSB8fFxyXG4gICAgICAgICAgICAgICAgaW52LmN1c3RvbWVySWQ/Lm5hbWU/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoTG93ZXIpIHx8XHJcbiAgICAgICAgICAgICAgICBpbnYuY3VzdG9tZXJJZD8ucGhvbmU/LmluY2x1ZGVzKHNlYXJjaCkgfHxcclxuICAgICAgICAgICAgICAgIGludi52ZWhpY2xlSWQ/LnJlZ2lzdHJhdGlvbk5vPy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaExvd2VyKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKGZpbHRlcmVkSW52b2ljZXMpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IGRiQ29ubmVjdCgpO1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcclxuXHJcbiAgICAgICAgaWYgKGRhdGEuY3VzdG9tZXJHc3Rpbikge1xyXG4gICAgICAgICAgICBjb25zdCBnc3RpblJlZ2V4ID0gL15bMC05XXsyfVtBLVpdezV9WzAtOV17NH1bQS1aXXsxfVsxLTlBLVpdezF9WlswLTlBLVpdezF9JC87XHJcbiAgICAgICAgICAgIGlmICghZ3N0aW5SZWdleC50ZXN0KGRhdGEuY3VzdG9tZXJHc3RpbikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW52YWxpZCBHU1RJTiBmb3JtYXQnIH0sIHsgc3RhdHVzOiA0MDAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghZGF0YS5pbnZvaWNlTm8pIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vbnRoID0gZGF0ZS5nZXRNb250aCgpO1xyXG4gICAgICAgICAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgICAgICBjb25zdCBmeVN0YXJ0ID0gbW9udGggPj0gMyA/IHllYXIgOiB5ZWFyIC0gMTtcclxuICAgICAgICAgICAgY29uc3QgZnlFbmQgPSAoZnlTdGFydCArIDEpICUgMTAwO1xyXG4gICAgICAgICAgICBjb25zdCBmeUNvZGUgPSBgJHtmeVN0YXJ0ICUgMTAwfSR7U3RyaW5nKGZ5RW5kKS5wYWRTdGFydCgyLCAnMCcpfWA7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjb3VudCA9IGF3YWl0IEludm9pY2UuY291bnREb2N1bWVudHMoe1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGd0ZTogbmV3IERhdGUoZnlTdGFydCwgMywgMSksXHJcbiAgICAgICAgICAgICAgICAgICAgJGx0OiBuZXcgRGF0ZShmeVN0YXJ0ICsgMSwgMywgMSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRhdGEuaW52b2ljZU5vID0gYElOVi0ke2Z5Q29kZX0tJHtTdHJpbmcoY291bnQgKyAxKS5wYWRTdGFydCg0LCAnMCcpfWA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTdHJpY3RseSByZWNhbGN1bGF0ZSBhbGwgdG90YWxzIGZyb20gaW5wdXQgaXRlbXNcclxuICAgICAgICBjb25zdCB0b3RhbHMgPSBjYWxjdWxhdGVJbnZvaWNlVG90YWxzKFxyXG4gICAgICAgICAgICBkYXRhLnBhcnRzLFxyXG4gICAgICAgICAgICBkYXRhLmxhYm91cixcclxuICAgICAgICAgICAgZGF0YS5vdXRzaWRlV29yayxcclxuICAgICAgICAgICAgZGF0YS5tYW51YWxEaXNjb3VudCxcclxuICAgICAgICAgICAgZGF0YS5jb3Vwb25EaXNjb3VudFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIC8vIE1lcmdlIGNhbGN1bGF0ZWQgdG90YWxzIGJhY2sgaW50byBkYXRhXHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbihkYXRhLCB0b3RhbHMpO1xyXG5cclxuICAgICAgICAvLyBTZXQgaW5pdGlhbCBwYXltZW50IHN0YXRlXHJcbiAgICAgICAgY29uc3QgYW1vdW50UGFpZCA9IE51bWJlcihkYXRhLmFtb3VudFBhaWQpIHx8IDA7XHJcbiAgICAgICAgaWYgKGRhdGEucGF5bWVudFN0YXR1cyA9PT0gJ3BhaWQnKSB7XHJcbiAgICAgICAgICAgIGRhdGEuYW1vdW50UGFpZCA9IGRhdGEuZ3JhbmRUb3RhbDtcclxuICAgICAgICAgICAgZGF0YS5wYWlkQXQgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YS5wYXltZW50U3RhdHVzID09PSAncGFydGlhbCcpIHtcclxuICAgICAgICAgICAgZGF0YS5hbW91bnRQYWlkID0gYW1vdW50UGFpZDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkYXRhLmFtb3VudFBhaWQgPSAwO1xyXG4gICAgICAgICAgICBkYXRhLnBheW1lbnRTdGF0dXMgPSAncGVuZGluZyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkYXRhLmJhbGFuY2VBbW91bnQgPSBkYXRhLmdyYW5kVG90YWwgLSBkYXRhLmFtb3VudFBhaWQ7XHJcblxyXG4gICAgICAgIGRhdGEuYXVkaXRMb2cgPSBbe1xyXG4gICAgICAgICAgICBhY3Rpb246ICdjcmVhdGVkJyxcclxuICAgICAgICAgICAgZmllbGQ6ICdpbnZvaWNlJyxcclxuICAgICAgICAgICAgbmV3VmFsdWU6IGRhdGEuaW52b2ljZU5vLFxyXG4gICAgICAgICAgICB1c2VyTmFtZTogZGF0YS5jcmVhdGVkQnlOYW1lIHx8ICdTeXN0ZW0nLFxyXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcclxuICAgICAgICB9XTtcclxuXHJcbiAgICAgICAgY29uc3QgaW52b2ljZSA9IGF3YWl0IEludm9pY2UuY3JlYXRlKGRhdGEpO1xyXG5cclxuICAgICAgICBpZiAoZGF0YS5qb2JDYXJkSWQpIHtcclxuICAgICAgICAgICAgYXdhaXQgSm9iQ2FyZC5maW5kQnlJZEFuZFVwZGF0ZShkYXRhLmpvYkNhcmRJZCwge1xyXG4gICAgICAgICAgICAgICAgaXNMb2NrZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdkZWxpdmVyZWQnLFxyXG4gICAgICAgICAgICAgICAgaW52b2ljZUlkOiBpbnZvaWNlLl9pZFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihpbnZvaWNlKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignSW52b2ljZSBjcmVhdGlvbiBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSwgeyBzdGF0dXM6IDUwMCB9KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBBVENIKHJlcXVlc3QpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZGJDb25uZWN0KCk7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xyXG4gICAgICAgIGNvbnN0IHsgX2lkLCByZWNvcmRQYXltZW50LCBwYXltZW50QW1vdW50LCBwYXltZW50TWV0aG9kLCB1cGRhdGVkQnlOYW1lLCAuLi5vdGhlclVwZGF0ZURhdGEgfSA9IGRhdGE7XHJcblxyXG4gICAgICAgIGlmICghX2lkKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ludm9pY2UgSUQgcmVxdWlyZWQnIH0sIHsgc3RhdHVzOiA0MDAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGludm9pY2UgPSBhd2FpdCBJbnZvaWNlLmZpbmRCeUlkKF9pZCk7XHJcbiAgICAgICAgaWYgKCFpbnZvaWNlKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ludm9pY2Ugbm90IGZvdW5kJyB9LCB7IHN0YXR1czogNDA0IH0pO1xyXG5cclxuICAgICAgICBpZiAoaW52b2ljZS5pc0xvY2tlZCAmJiAhcmVjb3JkUGF5bWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ludm9pY2UgaXMgbG9ja2VkIGFuZCBjYW5ub3QgYmUgZWRpdGVkJyB9LCB7IHN0YXR1czogNDAzIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFpbnZvaWNlLmF1ZGl0TG9nKSBpbnZvaWNlLmF1ZGl0TG9nID0gW107XHJcblxyXG4gICAgICAgIC8vIEhhbmRsZSBwYXltZW50IHJlY29yZGluZ1xyXG4gICAgICAgIGlmIChyZWNvcmRQYXltZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBheUFtdCA9IE51bWJlcihwYXltZW50QW1vdW50KSB8fCAwO1xyXG4gICAgICAgICAgICBpZiAocGF5QW10IDw9IDApIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnUGF5bWVudCBhbW91bnQgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCcgfSwgeyBzdGF0dXM6IDQwMCB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG9sZFBhaWQgPSBOdW1iZXIoaW52b2ljZS5hbW91bnRQYWlkKSB8fCAwO1xyXG4gICAgICAgICAgICBpbnZvaWNlLmFtb3VudFBhaWQgPSBvbGRQYWlkICsgcGF5QW10O1xyXG4gICAgICAgICAgICBpbnZvaWNlLnBheW1lbnRNZXRob2QgPSBwYXltZW50TWV0aG9kIHx8IGludm9pY2UucGF5bWVudE1ldGhvZDtcclxuXHJcbiAgICAgICAgICAgIGludm9pY2UuYXVkaXRMb2cucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdwYXltZW50X3JlY29yZGVkJyxcclxuICAgICAgICAgICAgICAgIGZpZWxkOiAnYW1vdW50UGFpZCcsXHJcbiAgICAgICAgICAgICAgICBvbGRWYWx1ZTogb2xkUGFpZCxcclxuICAgICAgICAgICAgICAgIG5ld1ZhbHVlOiBpbnZvaWNlLmFtb3VudFBhaWQsXHJcbiAgICAgICAgICAgICAgICB1c2VyTmFtZTogdXBkYXRlZEJ5TmFtZSB8fCAnU3lzdGVtJyxcclxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEhhbmRsZSBmaWVsZCB1cGRhdGVzIGFuZCBwb3RlbnRpYWwgdG90YWwgcmVjYWxjdWxhdGlvblxyXG4gICAgICAgIGNvbnN0IHRyYWNrRmllbGRzID0gWydwYXJ0cycsICdsYWJvdXInLCAnb3V0c2lkZVdvcmsnLCAnbWFudWFsRGlzY291bnQnLCAnY291cG9uRGlzY291bnQnXTtcclxuICAgICAgICBsZXQgbmVlZHNSZWNhbGMgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdHJhY2tGaWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChvdGhlclVwZGF0ZURhdGFbZmllbGRdICE9PSB1bmRlZmluZWQgJiYgSlNPTi5zdHJpbmdpZnkoaW52b2ljZVtmaWVsZF0pICE9PSBKU09OLnN0cmluZ2lmeShvdGhlclVwZGF0ZURhdGFbZmllbGRdKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGludm9pY2VbZmllbGRdKSk7XHJcbiAgICAgICAgICAgICAgICBpbnZvaWNlW2ZpZWxkXSA9IG90aGVyVXBkYXRlRGF0YVtmaWVsZF07XHJcbiAgICAgICAgICAgICAgICBuZWVkc1JlY2FsYyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpbnZvaWNlLmF1ZGl0TG9nLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ3VwZGF0ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLFxyXG4gICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlOiBvdGhlclVwZGF0ZURhdGFbZmllbGRdLFxyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJOYW1lOiB1cGRhdGVkQnlOYW1lIHx8ICdTeXN0ZW0nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKG5lZWRzUmVjYWxjKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvdGFscyA9IGNhbGN1bGF0ZUludm9pY2VUb3RhbHMoXHJcbiAgICAgICAgICAgICAgICBpbnZvaWNlLnBhcnRzLFxyXG4gICAgICAgICAgICAgICAgaW52b2ljZS5sYWJvdXIsXHJcbiAgICAgICAgICAgICAgICBpbnZvaWNlLm91dHNpZGVXb3JrLFxyXG4gICAgICAgICAgICAgICAgaW52b2ljZS5tYW51YWxEaXNjb3VudCxcclxuICAgICAgICAgICAgICAgIGludm9pY2UuY291cG9uRGlzY291bnRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihpbnZvaWNlLCB0b3RhbHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRXhwbGljaXRseSBmb3JjZSBiYWxhbmNlIGNhbGN1bGF0aW9uIGJlZm9yZSBzYXZlXHJcbiAgICAgICAgY29uc3QgZmluYWxUb3RhbCA9IE51bWJlcihpbnZvaWNlLmdyYW5kVG90YWwpIHx8IDA7XHJcbiAgICAgICAgY29uc3QgZmluYWxQYWlkID0gTnVtYmVyKGludm9pY2UuYW1vdW50UGFpZCkgfHwgMDtcclxuICAgICAgICBpbnZvaWNlLmJhbGFuY2VBbW91bnQgPSBmaW5hbFRvdGFsIC0gZmluYWxQYWlkO1xyXG5cclxuICAgICAgICAvLyBBdXRvLXVwZGF0ZSBzdGF0dXNcclxuICAgICAgICBpZiAoaW52b2ljZS5iYWxhbmNlQW1vdW50IDw9IDAgJiYgZmluYWxUb3RhbCA+IDApIHtcclxuICAgICAgICAgICAgaW52b2ljZS5wYXltZW50U3RhdHVzID0gJ3BhaWQnO1xyXG4gICAgICAgICAgICBpZiAoIWludm9pY2UucGFpZEF0KSBpbnZvaWNlLnBhaWRBdCA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIGlmICghaW52b2ljZS5pc0xvY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgaW52b2ljZS5pc0xvY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpbnZvaWNlLmxvY2tlZEF0ID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgICAgIGludm9pY2UubG9ja2VkUmVhc29uID0gJ1BheW1lbnQgY29tcGxldGVkJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoZmluYWxQYWlkID4gMCkge1xyXG4gICAgICAgICAgICBpbnZvaWNlLnBheW1lbnRTdGF0dXMgPSAncGFydGlhbCc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW52b2ljZS5wYXltZW50U3RhdHVzID0gJ3BlbmRpbmcnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXdhaXQgaW52b2ljZS5zYXZlKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRJbnZvaWNlID0gYXdhaXQgSW52b2ljZS5maW5kQnlJZChpbnZvaWNlLl9pZClcclxuICAgICAgICAgICAgLnBvcHVsYXRlKCdjdXN0b21lcklkJylcclxuICAgICAgICAgICAgLnBvcHVsYXRlKCd2ZWhpY2xlSWQnKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHVwZGF0ZWRJbnZvaWNlKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignSW52b2ljZSB1cGRhdGUgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0sIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImRiQ29ubmVjdCIsIkludm9pY2UiLCJKb2JDYXJkIiwiY2FsY3VsYXRlSW52b2ljZVRvdGFscyIsInBhcnRzIiwibGFib3VyIiwib3V0c2lkZVdvcmsiLCJtYW51YWxEaXNjb3VudCIsImNvdXBvbkRpc2NvdW50IiwicHJvY2VzcyIsIml0ZW1zIiwibWFwIiwiaXRlbSIsInF0eSIsIk51bWJlciIsInJhdGUiLCJnc3RQZXJjZW50IiwiZ3N0IiwidGF4YWJsZUFtb3VudCIsImdzdEFtb3VudCIsImxpbmVUb3RhbCIsInByb2Nlc3NlZFBhcnRzIiwicHJvY2Vzc2VkTGFib3VyIiwicHJvY2Vzc2VkT3V0c2lkZVdvcmsiLCJhbGxJdGVtcyIsInN1YnRvdGFsIiwicmVkdWNlIiwic3VtIiwidG90YWxHc3QiLCJjZ3N0Iiwic2dzdCIsImRpc2NvdW50QW1vdW50IiwiYmVmb3JlUm91bmQiLCJncmFuZFRvdGFsIiwiTWF0aCIsInJvdW5kIiwicm91bmRPZmYiLCJkaXNjb3VudCIsIkdFVCIsInJlcXVlc3QiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJzdGF0dXMiLCJnZXQiLCJwYXltZW50U3RhdHVzIiwiYnJhbmNoIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsInNlYXJjaCIsInF1ZXJ5IiwiZGF0ZSIsIiRndGUiLCJEYXRlIiwiJGx0ZSIsImludm9pY2VzIiwiZmluZCIsInBvcHVsYXRlIiwic29ydCIsImNyZWF0ZWRBdCIsImZpbHRlcmVkSW52b2ljZXMiLCJzZWFyY2hMb3dlciIsInRvTG93ZXJDYXNlIiwiZmlsdGVyIiwiaW52IiwiaW52b2ljZU5vIiwiaW5jbHVkZXMiLCJjdXN0b21lcklkIiwibmFtZSIsInBob25lIiwidmVoaWNsZUlkIiwicmVnaXN0cmF0aW9uTm8iLCJqc29uIiwiZXJyb3IiLCJtZXNzYWdlIiwiUE9TVCIsImRhdGEiLCJjdXN0b21lckdzdGluIiwiZ3N0aW5SZWdleCIsInRlc3QiLCJtb250aCIsImdldE1vbnRoIiwieWVhciIsImdldEZ1bGxZZWFyIiwiZnlTdGFydCIsImZ5RW5kIiwiZnlDb2RlIiwiU3RyaW5nIiwicGFkU3RhcnQiLCJjb3VudCIsImNvdW50RG9jdW1lbnRzIiwiJGx0IiwidG90YWxzIiwiT2JqZWN0IiwiYXNzaWduIiwiYW1vdW50UGFpZCIsInBhaWRBdCIsImJhbGFuY2VBbW91bnQiLCJhdWRpdExvZyIsImFjdGlvbiIsImZpZWxkIiwibmV3VmFsdWUiLCJ1c2VyTmFtZSIsImNyZWF0ZWRCeU5hbWUiLCJ0aW1lc3RhbXAiLCJpbnZvaWNlIiwiY3JlYXRlIiwiam9iQ2FyZElkIiwiZmluZEJ5SWRBbmRVcGRhdGUiLCJpc0xvY2tlZCIsImludm9pY2VJZCIsIl9pZCIsImNvbnNvbGUiLCJQQVRDSCIsInJlY29yZFBheW1lbnQiLCJwYXltZW50QW1vdW50IiwicGF5bWVudE1ldGhvZCIsInVwZGF0ZWRCeU5hbWUiLCJvdGhlclVwZGF0ZURhdGEiLCJmaW5kQnlJZCIsInBheUFtdCIsIm9sZFBhaWQiLCJwdXNoIiwib2xkVmFsdWUiLCJ0cmFja0ZpZWxkcyIsIm5lZWRzUmVjYWxjIiwiZm9yRWFjaCIsInVuZGVmaW5lZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJwYXJzZSIsImZpbmFsVG90YWwiLCJmaW5hbFBhaWQiLCJsb2NrZWRBdCIsImxvY2tlZFJlYXNvbiIsInNhdmUiLCJ1cGRhdGVkSW52b2ljZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/invoices/route.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/mongodb.js":
/*!****************************!*\
  !*** ./src/lib/mongodb.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nconsole.log('Connecting to MongoDB at:', MONGODB_URI);\nif (!MONGODB_URI) {\n    throw new Error('Please define the MONGODB_URI environment variable inside .env.local');\n}\n/**\r\n * Global is used here to maintain a cached connection across hot reloads\r\n * in development. This prevents connections from growing exponentially\r\n * during API Route usage.\r\n */ let cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function dbConnect() {\n    if (cached.conn) {\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        const opts = {\n            bufferCommands: false\n        };\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts).then((mongoose)=>{\n            return mongoose;\n        });\n    }\n    try {\n        cached.conn = await cached.promise;\n    } catch (e) {\n        cached.promise = null;\n        throw e;\n    }\n    return cached.conn;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dbConnect);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL21vbmdvZGIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdDO0FBRWhDLE1BQU1DLGNBQWNDLFFBQVFDLEdBQUcsQ0FBQ0YsV0FBVztBQUMzQ0csUUFBUUMsR0FBRyxDQUFDLDZCQUE2Qko7QUFFekMsSUFBSSxDQUFDQSxhQUFhO0lBQ2QsTUFBTSxJQUFJSyxNQUFNO0FBQ3BCO0FBRUE7Ozs7Q0FJQyxHQUNELElBQUlDLFNBQVNDLE9BQU9SLFFBQVE7QUFFNUIsSUFBSSxDQUFDTyxRQUFRO0lBQ1RBLFNBQVNDLE9BQU9SLFFBQVEsR0FBRztRQUFFUyxNQUFNO1FBQU1DLFNBQVM7SUFBSztBQUMzRDtBQUVBLGVBQWVDO0lBQ1gsSUFBSUosT0FBT0UsSUFBSSxFQUFFO1FBQ2IsT0FBT0YsT0FBT0UsSUFBSTtJQUN0QjtJQUVBLElBQUksQ0FBQ0YsT0FBT0csT0FBTyxFQUFFO1FBQ2pCLE1BQU1FLE9BQU87WUFDVEMsZ0JBQWdCO1FBQ3BCO1FBRUFOLE9BQU9HLE9BQU8sR0FBR1YsdURBQWdCLENBQUNDLGFBQWFXLE1BQU1HLElBQUksQ0FBQyxDQUFDZjtZQUN2RCxPQUFPQTtRQUNYO0lBQ0o7SUFFQSxJQUFJO1FBQ0FPLE9BQU9FLElBQUksR0FBRyxNQUFNRixPQUFPRyxPQUFPO0lBQ3RDLEVBQUUsT0FBT00sR0FBRztRQUNSVCxPQUFPRyxPQUFPLEdBQUc7UUFDakIsTUFBTU07SUFDVjtJQUVBLE9BQU9ULE9BQU9FLElBQUk7QUFDdEI7QUFFQSxpRUFBZUUsU0FBU0EsRUFBQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFx1c2VyXFxEZXNrdG9wXFxTMl9Nb3RvcnpfQ1JNXFxzcmNcXGxpYlxcbW9uZ29kYi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xyXG5cclxuY29uc3QgTU9OR09EQl9VUkkgPSBwcm9jZXNzLmVudi5NT05HT0RCX1VSSTtcclxuY29uc29sZS5sb2coJ0Nvbm5lY3RpbmcgdG8gTW9uZ29EQiBhdDonLCBNT05HT0RCX1VSSSk7XHJcblxyXG5pZiAoIU1PTkdPREJfVVJJKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBkZWZpbmUgdGhlIE1PTkdPREJfVVJJIGVudmlyb25tZW50IHZhcmlhYmxlIGluc2lkZSAuZW52LmxvY2FsJyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHbG9iYWwgaXMgdXNlZCBoZXJlIHRvIG1haW50YWluIGEgY2FjaGVkIGNvbm5lY3Rpb24gYWNyb3NzIGhvdCByZWxvYWRzXHJcbiAqIGluIGRldmVsb3BtZW50LiBUaGlzIHByZXZlbnRzIGNvbm5lY3Rpb25zIGZyb20gZ3Jvd2luZyBleHBvbmVudGlhbGx5XHJcbiAqIGR1cmluZyBBUEkgUm91dGUgdXNhZ2UuXHJcbiAqL1xyXG5sZXQgY2FjaGVkID0gZ2xvYmFsLm1vbmdvb3NlO1xyXG5cclxuaWYgKCFjYWNoZWQpIHtcclxuICAgIGNhY2hlZCA9IGdsb2JhbC5tb25nb29zZSA9IHsgY29ubjogbnVsbCwgcHJvbWlzZTogbnVsbCB9O1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBkYkNvbm5lY3QoKSB7XHJcbiAgICBpZiAoY2FjaGVkLmNvbm4pIHtcclxuICAgICAgICByZXR1cm4gY2FjaGVkLmNvbm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFjYWNoZWQucHJvbWlzZSkge1xyXG4gICAgICAgIGNvbnN0IG9wdHMgPSB7XHJcbiAgICAgICAgICAgIGJ1ZmZlckNvbW1hbmRzOiBmYWxzZSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjYWNoZWQucHJvbWlzZSA9IG1vbmdvb3NlLmNvbm5lY3QoTU9OR09EQl9VUkksIG9wdHMpLnRoZW4oKG1vbmdvb3NlKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBtb25nb29zZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNhY2hlZC5jb25uID0gYXdhaXQgY2FjaGVkLnByb21pc2U7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgY2FjaGVkLnByb21pc2UgPSBudWxsO1xyXG4gICAgICAgIHRocm93IGU7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNhY2hlZC5jb25uO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBkYkNvbm5lY3Q7XHJcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsIk1PTkdPREJfVVJJIiwicHJvY2VzcyIsImVudiIsImNvbnNvbGUiLCJsb2ciLCJFcnJvciIsImNhY2hlZCIsImdsb2JhbCIsImNvbm4iLCJwcm9taXNlIiwiZGJDb25uZWN0Iiwib3B0cyIsImJ1ZmZlckNvbW1hbmRzIiwiY29ubmVjdCIsInRoZW4iLCJlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/mongodb.js\n");

/***/ }),

/***/ "(rsc)/./src/models/Invoice.js":
/*!*******************************!*\
  !*** ./src/models/Invoice.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst InvoiceSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    invoiceNo: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    date: {\n        type: Date,\n        default: Date.now\n    },\n    jobCardId: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: 'JobCard'\n    },\n    customerId: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: 'Customer',\n        required: true\n    },\n    vehicleId: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: 'Vehicle',\n        required: true\n    },\n    // Customer GSTIN (optional)\n    customerGstin: {\n        type: String,\n        default: ''\n    },\n    // Invoice Items\n    parts: [\n        {\n            code: String,\n            name: String,\n            hsn: String,\n            qty: {\n                type: Number,\n                min: 0\n            },\n            rate: {\n                type: Number,\n                min: 0\n            },\n            gst: {\n                type: Number,\n                default: 18\n            },\n            taxableAmount: Number,\n            lineTotal: Number\n        }\n    ],\n    labour: [\n        {\n            code: String,\n            name: String,\n            sac: {\n                type: String,\n                default: '998714'\n            },\n            qty: {\n                type: Number,\n                min: 0\n            },\n            rate: {\n                type: Number,\n                min: 0\n            },\n            gst: {\n                type: Number,\n                default: 18\n            },\n            taxableAmount: Number,\n            lineTotal: Number\n        }\n    ],\n    outsideWork: [\n        {\n            code: String,\n            name: String,\n            sac: {\n                type: String,\n                default: '998719'\n            },\n            qty: {\n                type: Number,\n                min: 0\n            },\n            rate: {\n                type: Number,\n                min: 0\n            },\n            gst: {\n                type: Number,\n                default: 18\n            },\n            taxableAmount: Number,\n            lineTotal: Number\n        }\n    ],\n    // Totals\n    subtotal: {\n        type: Number,\n        required: true\n    },\n    cgst: {\n        type: Number,\n        required: true\n    },\n    sgst: {\n        type: Number,\n        required: true\n    },\n    discount: {\n        type: Number,\n        default: 0\n    },\n    manualDiscount: {\n        type: Number,\n        default: 0\n    },\n    couponCode: String,\n    couponDiscount: {\n        type: Number,\n        default: 0\n    },\n    roundOff: {\n        type: Number,\n        default: 0\n    },\n    grandTotal: {\n        type: Number,\n        required: true\n    },\n    // Payment Tracking\n    paymentStatus: {\n        type: String,\n        default: 'pending',\n        lowercase: true\n    },\n    paymentMethod: {\n        type: String,\n        lowercase: true\n    },\n    paymentDetails: {\n        cash: {\n            type: Number,\n            default: 0\n        },\n        card: {\n            type: Number,\n            default: 0\n        },\n        upi: {\n            type: Number,\n            default: 0\n        }\n    },\n    amountPaid: {\n        type: Number,\n        default: 0\n    },\n    balanceAmount: {\n        type: Number,\n        default: 0\n    },\n    paidAt: Date,\n    // Next Service\n    nextServiceDate: Date,\n    nextServiceKm: Number,\n    nextServiceRecommendation: String,\n    // Status & Locking\n    status: {\n        type: String,\n        enum: [\n            'active',\n            'cancelled'\n        ],\n        default: 'active'\n    },\n    isLocked: {\n        type: Boolean,\n        default: false\n    },\n    lockedAt: Date,\n    lockedReason: String,\n    // Audit\n    branch: {\n        type: String,\n        required: true\n    },\n    createdBy: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: 'Staff'\n    },\n    approvedBy: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: 'Staff'\n    },\n    auditLog: {\n        type: [\n            {\n                action: String,\n                field: String,\n                oldValue: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.Mixed,\n                newValue: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.Mixed,\n                userId: {\n                    type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n                    ref: 'Staff'\n                },\n                userName: String,\n                timestamp: {\n                    type: Date,\n                    default: Date.now\n                }\n            }\n        ],\n        default: []\n    }\n}, {\n    timestamps: true\n});\n// Pre-save hook to calculate balance and status\nInvoiceSchema.pre('save', function(next) {\n    console.log('--- Invoice Pre-Save Hook Start ---');\n    console.log('Doc state (input):', {\n        invoiceNo: this.invoiceNo,\n        grandTotal: this.grandTotal,\n        amountPaid: this.amountPaid,\n        balanceAmount: this.balanceAmount,\n        paymentStatus: this.paymentStatus\n    });\n    const total = Number(this.grandTotal) || 0;\n    const paid = Number(this.amountPaid) || 0;\n    this.balanceAmount = total - paid;\n    console.log('Calculated balanceAmount:', this.balanceAmount);\n    // Auto-update status if not manually set to something else or to ensure correctness\n    if (this.balanceAmount <= 0 && total > 0) {\n        this.paymentStatus = 'paid';\n        if (!this.paidAt) this.paidAt = new Date();\n    } else if (paid > 0) {\n        this.paymentStatus = 'partial';\n    } else {\n        this.paymentStatus = 'pending';\n    }\n    console.log('Calculated paymentStatus:', this.paymentStatus);\n    // Auto-lock if fully paid\n    if (this.paymentStatus === 'paid' && !this.isLocked) {\n        this.isLocked = true;\n        this.lockedAt = new Date();\n        this.lockedReason = 'Payment completed';\n    }\n    console.log('--- Invoice Pre-Save Hook End ---');\n    next();\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Invoice || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('Invoice', InvoiceSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUNtRCxZQUFZLEdBQUc7SUFDeEI7SUFFQWdCLFFBQVFDLEdBQUcsQ0FBQztJQUNaRjtBQUNKO0FBS0EsaUVBQWUzRSx3REFBZSxDQUFDaUYsT0FBTyxJQUFJakYscURBQWMsQ0FBQyxXQUFXQyxjQUFjQSxFQUFDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXHVzZXJcXERlc2t0b3BcXFMyX01vdG9yel9DUk1cXHNyY1xcbW9kZWxzXFxJbnZvaWNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XHJcblxyXG5jb25zdCBJbnZvaWNlU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgICBpbnZvaWNlTm86IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSwgdW5pcXVlOiB0cnVlIH0sXHJcbiAgICBkYXRlOiB7IHR5cGU6IERhdGUsIGRlZmF1bHQ6IERhdGUubm93IH0sXHJcbiAgICBqb2JDYXJkSWQ6IHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6ICdKb2JDYXJkJyB9LFxyXG4gICAgY3VzdG9tZXJJZDogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ0N1c3RvbWVyJywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICAgIHZlaGljbGVJZDogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ1ZlaGljbGUnLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG5cclxuICAgIC8vIEN1c3RvbWVyIEdTVElOIChvcHRpb25hbClcclxuICAgIGN1c3RvbWVyR3N0aW46IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LFxyXG5cclxuICAgIC8vIEludm9pY2UgSXRlbXNcclxuICAgIHBhcnRzOiBbe1xyXG4gICAgICAgIGNvZGU6IFN0cmluZyxcclxuICAgICAgICBuYW1lOiBTdHJpbmcsXHJcbiAgICAgICAgaHNuOiBTdHJpbmcsXHJcbiAgICAgICAgcXR5OiB7IHR5cGU6IE51bWJlciwgbWluOiAwIH0sXHJcbiAgICAgICAgcmF0ZTogeyB0eXBlOiBOdW1iZXIsIG1pbjogMCB9LFxyXG4gICAgICAgIGdzdDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDE4IH0sXHJcbiAgICAgICAgdGF4YWJsZUFtb3VudDogTnVtYmVyLFxyXG4gICAgICAgIGxpbmVUb3RhbDogTnVtYmVyXHJcbiAgICB9XSxcclxuICAgIGxhYm91cjogW3tcclxuICAgICAgICBjb2RlOiBTdHJpbmcsXHJcbiAgICAgICAgbmFtZTogU3RyaW5nLFxyXG4gICAgICAgIHNhYzogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICc5OTg3MTQnIH0sXHJcbiAgICAgICAgcXR5OiB7IHR5cGU6IE51bWJlciwgbWluOiAwIH0sXHJcbiAgICAgICAgcmF0ZTogeyB0eXBlOiBOdW1iZXIsIG1pbjogMCB9LFxyXG4gICAgICAgIGdzdDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDE4IH0sXHJcbiAgICAgICAgdGF4YWJsZUFtb3VudDogTnVtYmVyLFxyXG4gICAgICAgIGxpbmVUb3RhbDogTnVtYmVyXHJcbiAgICB9XSxcclxuICAgIG91dHNpZGVXb3JrOiBbe1xyXG4gICAgICAgIGNvZGU6IFN0cmluZyxcclxuICAgICAgICBuYW1lOiBTdHJpbmcsXHJcbiAgICAgICAgc2FjOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJzk5ODcxOScgfSxcclxuICAgICAgICBxdHk6IHsgdHlwZTogTnVtYmVyLCBtaW46IDAgfSxcclxuICAgICAgICByYXRlOiB7IHR5cGU6IE51bWJlciwgbWluOiAwIH0sXHJcbiAgICAgICAgZ3N0OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMTggfSxcclxuICAgICAgICB0YXhhYmxlQW1vdW50OiBOdW1iZXIsXHJcbiAgICAgICAgbGluZVRvdGFsOiBOdW1iZXJcclxuICAgIH1dLFxyXG5cclxuICAgIC8vIFRvdGFsc1xyXG4gICAgc3VidG90YWw6IHsgdHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gICAgY2dzdDogeyB0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgICBzZ3N0OiB7IHR5cGU6IE51bWJlciwgcmVxdWlyZWQ6IHRydWUgfSxcclxuICAgIGRpc2NvdW50OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxyXG4gICAgbWFudWFsRGlzY291bnQ6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXHJcbiAgICBjb3Vwb25Db2RlOiBTdHJpbmcsXHJcbiAgICBjb3Vwb25EaXNjb3VudDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcclxuICAgIHJvdW5kT2ZmOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxyXG4gICAgZ3JhbmRUb3RhbDogeyB0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlIH0sXHJcblxyXG4gICAgLy8gUGF5bWVudCBUcmFja2luZ1xyXG4gICAgcGF5bWVudFN0YXR1czoge1xyXG4gICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICBkZWZhdWx0OiAncGVuZGluZycsXHJcbiAgICAgICAgbG93ZXJjYXNlOiB0cnVlXHJcbiAgICB9LFxyXG4gICAgcGF5bWVudE1ldGhvZDoge1xyXG4gICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICBsb3dlcmNhc2U6IHRydWVcclxuICAgIH0sXHJcbiAgICBwYXltZW50RGV0YWlsczoge1xyXG4gICAgICAgIGNhc2g6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXHJcbiAgICAgICAgY2FyZDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcclxuICAgICAgICB1cGk6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH1cclxuICAgIH0sXHJcbiAgICBhbW91bnRQYWlkOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxyXG4gICAgYmFsYW5jZUFtb3VudDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcclxuICAgIHBhaWRBdDogRGF0ZSxcclxuXHJcbiAgICAvLyBOZXh0IFNlcnZpY2VcclxuICAgIG5leHRTZXJ2aWNlRGF0ZTogRGF0ZSxcclxuICAgIG5leHRTZXJ2aWNlS206IE51bWJlcixcclxuICAgIG5leHRTZXJ2aWNlUmVjb21tZW5kYXRpb246IFN0cmluZyxcclxuXHJcbiAgICAvLyBTdGF0dXMgJiBMb2NraW5nXHJcbiAgICBzdGF0dXM6IHsgdHlwZTogU3RyaW5nLCBlbnVtOiBbJ2FjdGl2ZScsICdjYW5jZWxsZWQnXSwgZGVmYXVsdDogJ2FjdGl2ZScgfSxcclxuICAgIGlzTG9ja2VkOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH0sXHJcbiAgICBsb2NrZWRBdDogRGF0ZSxcclxuICAgIGxvY2tlZFJlYXNvbjogU3RyaW5nLFxyXG5cclxuICAgIC8vIEF1ZGl0XHJcbiAgICBicmFuY2g6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gICAgY3JlYXRlZEJ5OiB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiAnU3RhZmYnIH0sXHJcbiAgICBhcHByb3ZlZEJ5OiB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiAnU3RhZmYnIH0sXHJcbiAgICBhdWRpdExvZzoge1xyXG4gICAgICAgIHR5cGU6IFt7XHJcbiAgICAgICAgICAgIGFjdGlvbjogU3RyaW5nLFxyXG4gICAgICAgICAgICBmaWVsZDogU3RyaW5nLFxyXG4gICAgICAgICAgICBvbGRWYWx1ZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk1peGVkLFxyXG4gICAgICAgICAgICBuZXdWYWx1ZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk1peGVkLFxyXG4gICAgICAgICAgICB1c2VySWQ6IHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6ICdTdGFmZicgfSxcclxuICAgICAgICAgICAgdXNlck5hbWU6IFN0cmluZyxcclxuICAgICAgICAgICAgdGltZXN0YW1wOiB7IHR5cGU6IERhdGUsIGRlZmF1bHQ6IERhdGUubm93IH1cclxuICAgICAgICB9XSxcclxuICAgICAgICBkZWZhdWx0OiBbXVxyXG4gICAgfVxyXG59LCB7XHJcbiAgICB0aW1lc3RhbXBzOiB0cnVlLFxyXG59KTtcclxuXHJcbi8vIFByZS1zYXZlIGhvb2sgdG8gY2FsY3VsYXRlIGJhbGFuY2UgYW5kIHN0YXR1c1xyXG5JbnZvaWNlU2NoZW1hLnByZSgnc2F2ZScsIGZ1bmN0aW9uIChuZXh0KSB7XHJcbiAgICBjb25zb2xlLmxvZygnLS0tIEludm9pY2UgUHJlLVNhdmUgSG9vayBTdGFydCAtLS0nKTtcclxuICAgIGNvbnNvbGUubG9nKCdEb2Mgc3RhdGUgKGlucHV0KTonLCB7XHJcbiAgICAgICAgaW52b2ljZU5vOiB0aGlzLmludm9pY2VObyxcclxuICAgICAgICBncmFuZFRvdGFsOiB0aGlzLmdyYW5kVG90YWwsXHJcbiAgICAgICAgYW1vdW50UGFpZDogdGhpcy5hbW91bnRQYWlkLFxyXG4gICAgICAgIGJhbGFuY2VBbW91bnQ6IHRoaXMuYmFsYW5jZUFtb3VudCxcclxuICAgICAgICBwYXltZW50U3RhdHVzOiB0aGlzLnBheW1lbnRTdGF0dXNcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IHRvdGFsID0gTnVtYmVyKHRoaXMuZ3JhbmRUb3RhbCkgfHwgMDtcclxuICAgIGNvbnN0IHBhaWQgPSBOdW1iZXIodGhpcy5hbW91bnRQYWlkKSB8fCAwO1xyXG5cclxuICAgIHRoaXMuYmFsYW5jZUFtb3VudCA9IHRvdGFsIC0gcGFpZDtcclxuICAgIGNvbnNvbGUubG9nKCdDYWxjdWxhdGVkIGJhbGFuY2VBbW91bnQ6JywgdGhpcy5iYWxhbmNlQW1vdW50KTtcclxuXHJcbiAgICAvLyBBdXRvLXVwZGF0ZSBzdGF0dXMgaWYgbm90IG1hbnVhbGx5IHNldCB0byBzb21ldGhpbmcgZWxzZSBvciB0byBlbnN1cmUgY29ycmVjdG5lc3NcclxuICAgIGlmICh0aGlzLmJhbGFuY2VBbW91bnQgPD0gMCAmJiB0b3RhbCA+IDApIHtcclxuICAgICAgICB0aGlzLnBheW1lbnRTdGF0dXMgPSAncGFpZCc7XHJcbiAgICAgICAgaWYgKCF0aGlzLnBhaWRBdCkgdGhpcy5wYWlkQXQgPSBuZXcgRGF0ZSgpO1xyXG4gICAgfSBlbHNlIGlmIChwYWlkID4gMCkge1xyXG4gICAgICAgIHRoaXMucGF5bWVudFN0YXR1cyA9ICdwYXJ0aWFsJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5wYXltZW50U3RhdHVzID0gJ3BlbmRpbmcnO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCdDYWxjdWxhdGVkIHBheW1lbnRTdGF0dXM6JywgdGhpcy5wYXltZW50U3RhdHVzKTtcclxuXHJcbiAgICAvLyBBdXRvLWxvY2sgaWYgZnVsbHkgcGFpZFxyXG4gICAgaWYgKHRoaXMucGF5bWVudFN0YXR1cyA9PT0gJ3BhaWQnICYmICF0aGlzLmlzTG9ja2VkKSB7XHJcbiAgICAgICAgdGhpcy5pc0xvY2tlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5sb2NrZWRBdCA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgdGhpcy5sb2NrZWRSZWFzb24gPSAnUGF5bWVudCBjb21wbGV0ZWQnO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCctLS0gSW52b2ljZSBQcmUtU2F2ZSBIb29rIEVuZCAtLS0nKTtcclxuICAgIG5leHQoKTtcclxufSk7XHJcblxyXG5cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBtb25nb29zZS5tb2RlbHMuSW52b2ljZSB8fCBtb25nb29zZS5tb2RlbCgnSW52b2ljZScsIEludm9pY2VTY2hlbWEpO1xyXG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJJbnZvaWNlU2NoZW1hIiwiU2NoZW1hIiwiaW52b2ljZU5vIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwidW5pcXVlIiwiZGF0ZSIsIkRhdGUiLCJkZWZhdWx0Iiwibm93Iiwiam9iQ2FyZElkIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsImN1c3RvbWVySWQiLCJ2ZWhpY2xlSWQiLCJjdXN0b21lckdzdGluIiwicGFydHMiLCJjb2RlIiwibmFtZSIsImhzbiIsInF0eSIsIk51bWJlciIsIm1pbiIsInJhdGUiLCJnc3QiLCJ0YXhhYmxlQW1vdW50IiwibGluZVRvdGFsIiwibGFib3VyIiwic2FjIiwib3V0c2lkZVdvcmsiLCJzdWJ0b3RhbCIsImNnc3QiLCJzZ3N0IiwiZGlzY291bnQiLCJtYW51YWxEaXNjb3VudCIsImNvdXBvbkNvZGUiLCJjb3Vwb25EaXNjb3VudCIsInJvdW5kT2ZmIiwiZ3JhbmRUb3RhbCIsInBheW1lbnRTdGF0dXMiLCJsb3dlcmNhc2UiLCJwYXltZW50TWV0aG9kIiwicGF5bWVudERldGFpbHMiLCJjYXNoIiwiY2FyZCIsInVwaSIsImFtb3VudFBhaWQiLCJiYWxhbmNlQW1vdW50IiwicGFpZEF0IiwibmV4dFNlcnZpY2VEYXRlIiwibmV4dFNlcnZpY2VLbSIsIm5leHRTZXJ2aWNlUmVjb21tZW5kYXRpb24iLCJzdGF0dXMiLCJlbnVtIiwiaXNMb2NrZWQiLCJCb29sZWFuIiwibG9ja2VkQXQiLCJsb2NrZWRSZWFzb24iLCJicmFuY2giLCJjcmVhdGVkQnkiLCJhcHByb3ZlZEJ5IiwiYXVkaXRMb2ciLCJhY3Rpb24iLCJmaWVsZCIsIm9sZFZhbHVlIiwiTWl4ZWQiLCJuZXdWYWx1ZSIsInVzZXJJZCIsInVzZXJOYW1lIiwidGltZXN0YW1wIiwidGltZXN0YW1wcyIsInByZSIsIm5leHQiLCJjb25zb2xlIiwibG9nIiwidG90YWwiLCJwYWlkIiwibW9kZWxzIiwiSW52b2ljZSIsIm1vZGVsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/models/Invoice.js\n");

/***/ }),

/***/ "(rsc)/./src/models/JobCard.js":
/*!*******************************!*\
  !*** ./src/models/JobCard.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst JobCardSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    jobCardNo: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    type: {\n        type: String,\n        enum: [\n            'service',\n            'quick'\n        ],\n        default: 'service'\n    },\n    status: {\n        type: String,\n        default: 'new'\n    },\n    customerId: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: 'Customer',\n        required: true\n    },\n    vehicleId: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: 'Vehicle',\n        required: true\n    },\n    technicianId: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: 'Staff'\n    },\n    serviceType: {\n        type: String\n    },\n    odometer: {\n        type: Number\n    },\n    fuelLevel: {\n        type: Number,\n        default: 50\n    },\n    oilLevel: {\n        type: String,\n        default: 'Normal'\n    },\n    batteryNo: {\n        type: String\n    },\n    customerVoice: {\n        type: String\n    },\n    advisorVoiceUrl: {\n        type: String\n    },\n    estimatedAmount: {\n        type: Number,\n        default: 0\n    },\n    advanceAmount: {\n        type: Number,\n        default: 0\n    },\n    advanceMethod: {\n        type: String\n    },\n    labourItems: [\n        {\n            name: {\n                type: String\n            },\n            rate: {\n                type: Number\n            },\n            qty: {\n                type: Number\n            },\n            technicianId: {\n                type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n                ref: 'Staff'\n            }\n        }\n    ],\n    spareRequests: [\n        {\n            partNumber: {\n                type: String\n            },\n            name: {\n                type: String\n            },\n            rate: {\n                type: Number\n            },\n            qty: {\n                type: Number\n            },\n            status: {\n                type: String,\n                default: 'pending'\n            }\n        }\n    ],\n    outsideWork: [\n        {\n            name: {\n                type: String\n            },\n            vendor: {\n                type: String\n            },\n            rate: {\n                type: Number\n            },\n            status: {\n                type: String,\n                default: 'pending'\n            }\n        }\n    ],\n    inspection: {\n        engineOil: {\n            type: String,\n            default: 'Normal'\n        },\n        brakeFluid: {\n            type: String,\n            default: 'Normal'\n        },\n        coolant: {\n            type: String,\n            default: 'Normal'\n        },\n        brakePads: {\n            type: String,\n            default: 'Good'\n        },\n        tires: {\n            type: String,\n            default: 'Good'\n        },\n        battery: {\n            type: String,\n            default: 'Good'\n        },\n        lights: {\n            type: String,\n            default: 'Functional'\n        },\n        filters: {\n            type: String,\n            default: 'Clean'\n        }\n    },\n    nextService: {\n        advice: {\n            type: String\n        },\n        dueDate: {\n            type: Date\n        },\n        dueOdometer: {\n            type: Number\n        }\n    },\n    delivery: {\n        type: {\n            type: String,\n            default: 'pickup'\n        },\n        address: {\n            type: String\n        },\n        challanNo: {\n            type: String\n        },\n        personName: {\n            type: String\n        }\n    },\n    signatures: {\n        customer: {\n            type: String\n        },\n        advisor: {\n            type: String\n        }\n    },\n    isLocked: {\n        type: Boolean,\n        default: false\n    },\n    estimateSent: {\n        print: {\n            type: Boolean,\n            default: false\n        },\n        whatsapp: {\n            type: Boolean,\n            default: false\n        },\n        email: {\n            type: Boolean,\n            default: false\n        }\n    }\n}, {\n    timestamps: true\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).JobCard || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('JobCard', JobCardSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL0pvYkNhcmQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdDO0FBRWhDLE1BQU1DLGdCQUFnQixJQUFJRCx3REFBZSxDQUFDO0lBQ3RDRyxXQUFXO1FBQUVDLE1BQU1DO1FBQVFDLFVBQVU7UUFBTUMsUUFBUTtJQUFLO0lBQ3hESCxNQUFNO1FBQUVBLE1BQU1DO1FBQVFHLE1BQU07WUFBQztZQUFXO1NBQVE7UUFBRUMsU0FBUztJQUFVO0lBQ3JFQyxRQUFRO1FBQUVOLE1BQU1DO1FBQVFJLFNBQVM7SUFBTTtJQUN2Q0UsWUFBWTtRQUFFUCxNQUFNSix3REFBZSxDQUFDWSxLQUFLLENBQUNDLFFBQVE7UUFBRUMsS0FBSztRQUFZUixVQUFVO0lBQUs7SUFDcEZTLFdBQVc7UUFBRVgsTUFBTUosd0RBQWUsQ0FBQ1ksS0FBSyxDQUFDQyxRQUFRO1FBQUVDLEtBQUs7UUFBV1IsVUFBVTtJQUFLO0lBQ2xGVSxjQUFjO1FBQUVaLE1BQU1KLHdEQUFlLENBQUNZLEtBQUssQ0FBQ0MsUUFBUTtRQUFFQyxLQUFLO0lBQVE7SUFFbkVHLGFBQWE7UUFBRWIsTUFBTUM7SUFBTztJQUM1QmEsVUFBVTtRQUFFZCxNQUFNZTtJQUFPO0lBQ3pCQyxXQUFXO1FBQUVoQixNQUFNZTtRQUFRVixTQUFTO0lBQUc7SUFDdkNZLFVBQVU7UUFBRWpCLE1BQU1DO1FBQVFJLFNBQVM7SUFBUztJQUM1Q2EsV0FBVztRQUFFbEIsTUFBTUM7SUFBTztJQUUxQmtCLGVBQWU7UUFBRW5CLE1BQU1DO0lBQU87SUFDOUJtQixpQkFBaUI7UUFBRXBCLE1BQU1DO0lBQU87SUFFaENvQixpQkFBaUI7UUFBRXJCLE1BQU1lO1FBQVFWLFNBQVM7SUFBRTtJQUM1Q2lCLGVBQWU7UUFBRXRCLE1BQU1lO1FBQVFWLFNBQVM7SUFBRTtJQUMxQ2tCLGVBQWU7UUFBRXZCLE1BQU1DO0lBQU87SUFFOUJ1QixhQUFhO1FBQUM7WUFDVkMsTUFBTTtnQkFBRXpCLE1BQU1DO1lBQU87WUFDckJ5QixNQUFNO2dCQUFFMUIsTUFBTWU7WUFBTztZQUNyQlksS0FBSztnQkFBRTNCLE1BQU1lO1lBQU87WUFDcEJILGNBQWM7Z0JBQUVaLE1BQU1KLHdEQUFlLENBQUNZLEtBQUssQ0FBQ0MsUUFBUTtnQkFBRUMsS0FBSztZQUFRO1FBQ3ZFO0tBQUU7SUFFRmtCLGVBQWU7UUFBQztZQUNaQyxZQUFZO2dCQUFFN0IsTUFBTUM7WUFBTztZQUMzQndCLE1BQU07Z0JBQUV6QixNQUFNQztZQUFPO1lBQ3JCeUIsTUFBTTtnQkFBRTFCLE1BQU1lO1lBQU87WUFDckJZLEtBQUs7Z0JBQUUzQixNQUFNZTtZQUFPO1lBQ3BCVCxRQUFRO2dCQUFFTixNQUFNQztnQkFBUUksU0FBUztZQUFVO1FBQy9DO0tBQUU7SUFFRnlCLGFBQWE7UUFBQztZQUNWTCxNQUFNO2dCQUFFekIsTUFBTUM7WUFBTztZQUNyQjhCLFFBQVE7Z0JBQUUvQixNQUFNQztZQUFPO1lBQ3ZCeUIsTUFBTTtnQkFBRTFCLE1BQU1lO1lBQU87WUFDckJULFFBQVE7Z0JBQUVOLE1BQU1DO2dCQUFRSSxTQUFTO1lBQVU7UUFDL0M7S0FBRTtJQUVGMkIsWUFBWTtRQUNSQyxXQUFXO1lBQUVqQyxNQUFNQztZQUFRSSxTQUFTO1FBQVM7UUFDN0M2QixZQUFZO1lBQUVsQyxNQUFNQztZQUFRSSxTQUFTO1FBQVM7UUFDOUM4QixTQUFTO1lBQUVuQyxNQUFNQztZQUFRSSxTQUFTO1FBQVM7UUFDM0MrQixXQUFXO1lBQUVwQyxNQUFNQztZQUFRSSxTQUFTO1FBQU87UUFDM0NnQyxPQUFPO1lBQUVyQyxNQUFNQztZQUFRSSxTQUFTO1FBQU87UUFDdkNpQyxTQUFTO1lBQUV0QyxNQUFNQztZQUFRSSxTQUFTO1FBQU87UUFDekNrQyxRQUFRO1lBQUV2QyxNQUFNQztZQUFRSSxTQUFTO1FBQWE7UUFDOUNtQyxTQUFTO1lBQUV4QyxNQUFNQztZQUFRSSxTQUFTO1FBQVE7SUFDOUM7SUFFQW9DLGFBQWE7UUFDVEMsUUFBUTtZQUFFMUMsTUFBTUM7UUFBTztRQUN2QjBDLFNBQVM7WUFBRTNDLE1BQU00QztRQUFLO1FBQ3RCQyxhQUFhO1lBQUU3QyxNQUFNZTtRQUFPO0lBQ2hDO0lBRUErQixVQUFVO1FBQ045QyxNQUFNO1lBQUVBLE1BQU1DO1lBQVFJLFNBQVM7UUFBUztRQUN4QzBDLFNBQVM7WUFBRS9DLE1BQU1DO1FBQU87UUFDeEIrQyxXQUFXO1lBQUVoRCxNQUFNQztRQUFPO1FBQzFCZ0QsWUFBWTtZQUFFakQsTUFBTUM7UUFBTztJQUMvQjtJQUVBaUQsWUFBWTtRQUNSQyxVQUFVO1lBQUVuRCxNQUFNQztRQUFPO1FBQ3pCbUQsU0FBUztZQUFFcEQsTUFBTUM7UUFBTztJQUM1QjtJQUVBb0QsVUFBVTtRQUFFckQsTUFBTXNEO1FBQVNqRCxTQUFTO0lBQU07SUFDMUNrRCxjQUFjO1FBQ1ZDLE9BQU87WUFBRXhELE1BQU1zRDtZQUFTakQsU0FBUztRQUFNO1FBQ3ZDb0QsVUFBVTtZQUFFekQsTUFBTXNEO1lBQVNqRCxTQUFTO1FBQU07UUFDMUNxRCxPQUFPO1lBQUUxRCxNQUFNc0Q7WUFBU2pELFNBQVM7UUFBTTtJQUMzQztBQUNKLEdBQUc7SUFBRXNELFlBQVk7QUFBSztBQUV0QixpRUFBZS9ELHdEQUFlLENBQUNpRSxPQUFPLElBQUlqRSxxREFBYyxDQUFDLFdBQVdDLGNBQWNBLEVBQUMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcdXNlclxcRGVza3RvcFxcUzJfTW90b3J6X0NSTVxcc3JjXFxtb2RlbHNcXEpvYkNhcmQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcclxuXHJcbmNvbnN0IEpvYkNhcmRTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICAgIGpvYkNhcmRObzogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlLCB1bmlxdWU6IHRydWUgfSxcclxuICAgIHR5cGU6IHsgdHlwZTogU3RyaW5nLCBlbnVtOiBbJ3NlcnZpY2UnLCAncXVpY2snXSwgZGVmYXVsdDogJ3NlcnZpY2UnIH0sXHJcbiAgICBzdGF0dXM6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnbmV3JyB9LFxyXG4gICAgY3VzdG9tZXJJZDogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ0N1c3RvbWVyJywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICAgIHZlaGljbGVJZDogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ1ZlaGljbGUnLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gICAgdGVjaG5pY2lhbklkOiB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiAnU3RhZmYnIH0sXHJcblxyXG4gICAgc2VydmljZVR5cGU6IHsgdHlwZTogU3RyaW5nIH0sXHJcbiAgICBvZG9tZXRlcjogeyB0eXBlOiBOdW1iZXIgfSxcclxuICAgIGZ1ZWxMZXZlbDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDUwIH0sXHJcbiAgICBvaWxMZXZlbDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICdOb3JtYWwnIH0sXHJcbiAgICBiYXR0ZXJ5Tm86IHsgdHlwZTogU3RyaW5nIH0sXHJcblxyXG4gICAgY3VzdG9tZXJWb2ljZTogeyB0eXBlOiBTdHJpbmcgfSxcclxuICAgIGFkdmlzb3JWb2ljZVVybDogeyB0eXBlOiBTdHJpbmcgfSxcclxuXHJcbiAgICBlc3RpbWF0ZWRBbW91bnQ6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXHJcbiAgICBhZHZhbmNlQW1vdW50OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxyXG4gICAgYWR2YW5jZU1ldGhvZDogeyB0eXBlOiBTdHJpbmcgfSxcclxuXHJcbiAgICBsYWJvdXJJdGVtczogW3tcclxuICAgICAgICBuYW1lOiB7IHR5cGU6IFN0cmluZyB9LFxyXG4gICAgICAgIHJhdGU6IHsgdHlwZTogTnVtYmVyIH0sXHJcbiAgICAgICAgcXR5OiB7IHR5cGU6IE51bWJlciB9LFxyXG4gICAgICAgIHRlY2huaWNpYW5JZDogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ1N0YWZmJyB9XHJcbiAgICB9XSxcclxuXHJcbiAgICBzcGFyZVJlcXVlc3RzOiBbe1xyXG4gICAgICAgIHBhcnROdW1iZXI6IHsgdHlwZTogU3RyaW5nIH0sXHJcbiAgICAgICAgbmFtZTogeyB0eXBlOiBTdHJpbmcgfSxcclxuICAgICAgICByYXRlOiB7IHR5cGU6IE51bWJlciB9LFxyXG4gICAgICAgIHF0eTogeyB0eXBlOiBOdW1iZXIgfSxcclxuICAgICAgICBzdGF0dXM6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAncGVuZGluZycgfVxyXG4gICAgfV0sXHJcblxyXG4gICAgb3V0c2lkZVdvcms6IFt7XHJcbiAgICAgICAgbmFtZTogeyB0eXBlOiBTdHJpbmcgfSxcclxuICAgICAgICB2ZW5kb3I6IHsgdHlwZTogU3RyaW5nIH0sXHJcbiAgICAgICAgcmF0ZTogeyB0eXBlOiBOdW1iZXIgfSxcclxuICAgICAgICBzdGF0dXM6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAncGVuZGluZycgfVxyXG4gICAgfV0sXHJcblxyXG4gICAgaW5zcGVjdGlvbjoge1xyXG4gICAgICAgIGVuZ2luZU9pbDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICdOb3JtYWwnIH0sXHJcbiAgICAgICAgYnJha2VGbHVpZDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICdOb3JtYWwnIH0sXHJcbiAgICAgICAgY29vbGFudDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICdOb3JtYWwnIH0sXHJcbiAgICAgICAgYnJha2VQYWRzOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJ0dvb2QnIH0sXHJcbiAgICAgICAgdGlyZXM6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnR29vZCcgfSxcclxuICAgICAgICBiYXR0ZXJ5OiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJ0dvb2QnIH0sXHJcbiAgICAgICAgbGlnaHRzOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJ0Z1bmN0aW9uYWwnIH0sXHJcbiAgICAgICAgZmlsdGVyczogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICdDbGVhbicgfVxyXG4gICAgfSxcclxuXHJcbiAgICBuZXh0U2VydmljZToge1xyXG4gICAgICAgIGFkdmljZTogeyB0eXBlOiBTdHJpbmcgfSxcclxuICAgICAgICBkdWVEYXRlOiB7IHR5cGU6IERhdGUgfSxcclxuICAgICAgICBkdWVPZG9tZXRlcjogeyB0eXBlOiBOdW1iZXIgfVxyXG4gICAgfSxcclxuXHJcbiAgICBkZWxpdmVyeToge1xyXG4gICAgICAgIHR5cGU6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAncGlja3VwJyB9LFxyXG4gICAgICAgIGFkZHJlc3M6IHsgdHlwZTogU3RyaW5nIH0sXHJcbiAgICAgICAgY2hhbGxhbk5vOiB7IHR5cGU6IFN0cmluZyB9LFxyXG4gICAgICAgIHBlcnNvbk5hbWU6IHsgdHlwZTogU3RyaW5nIH1cclxuICAgIH0sXHJcblxyXG4gICAgc2lnbmF0dXJlczoge1xyXG4gICAgICAgIGN1c3RvbWVyOiB7IHR5cGU6IFN0cmluZyB9LCAvLyBCYXNlNjQgb3IgVVJMXHJcbiAgICAgICAgYWR2aXNvcjogeyB0eXBlOiBTdHJpbmcgfVxyXG4gICAgfSxcclxuXHJcbiAgICBpc0xvY2tlZDogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9LFxyXG4gICAgZXN0aW1hdGVTZW50OiB7XHJcbiAgICAgICAgcHJpbnQ6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSxcclxuICAgICAgICB3aGF0c2FwcDogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9LFxyXG4gICAgICAgIGVtYWlsOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH1cclxuICAgIH1cclxufSwgeyB0aW1lc3RhbXBzOiB0cnVlIH0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgbW9uZ29vc2UubW9kZWxzLkpvYkNhcmQgfHwgbW9uZ29vc2UubW9kZWwoJ0pvYkNhcmQnLCBKb2JDYXJkU2NoZW1hKTtcclxuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiSm9iQ2FyZFNjaGVtYSIsIlNjaGVtYSIsImpvYkNhcmRObyIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsInVuaXF1ZSIsImVudW0iLCJkZWZhdWx0Iiwic3RhdHVzIiwiY3VzdG9tZXJJZCIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJ2ZWhpY2xlSWQiLCJ0ZWNobmljaWFuSWQiLCJzZXJ2aWNlVHlwZSIsIm9kb21ldGVyIiwiTnVtYmVyIiwiZnVlbExldmVsIiwib2lsTGV2ZWwiLCJiYXR0ZXJ5Tm8iLCJjdXN0b21lclZvaWNlIiwiYWR2aXNvclZvaWNlVXJsIiwiZXN0aW1hdGVkQW1vdW50IiwiYWR2YW5jZUFtb3VudCIsImFkdmFuY2VNZXRob2QiLCJsYWJvdXJJdGVtcyIsIm5hbWUiLCJyYXRlIiwicXR5Iiwic3BhcmVSZXF1ZXN0cyIsInBhcnROdW1iZXIiLCJvdXRzaWRlV29yayIsInZlbmRvciIsImluc3BlY3Rpb24iLCJlbmdpbmVPaWwiLCJicmFrZUZsdWlkIiwiY29vbGFudCIsImJyYWtlUGFkcyIsInRpcmVzIiwiYmF0dGVyeSIsImxpZ2h0cyIsImZpbHRlcnMiLCJuZXh0U2VydmljZSIsImFkdmljZSIsImR1ZURhdGUiLCJEYXRlIiwiZHVlT2RvbWV0ZXIiLCJkZWxpdmVyeSIsImFkZHJlc3MiLCJjaGFsbGFuTm8iLCJwZXJzb25OYW1lIiwic2lnbmF0dXJlcyIsImN1c3RvbWVyIiwiYWR2aXNvciIsImlzTG9ja2VkIiwiQm9vbGVhbiIsImVzdGltYXRlU2VudCIsInByaW50Iiwid2hhdHNhcHAiLCJlbWFpbCIsInRpbWVzdGFtcHMiLCJtb2RlbHMiLCJKb2JDYXJkIiwibW9kZWwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/models/JobCard.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Finvoices%2Froute&page=%2Fapi%2Finvoices%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finvoices%2Froute.js&appDir=C%3A%5CUsers%5Cuser%5CDesktop%5CS2_Motorz_CRM%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cuser%5CDesktop%5CS2_Motorz_CRM&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();